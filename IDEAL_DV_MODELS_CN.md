# 地表→轨道理想 Δv 模型（两体、无大气、无重力损失）

---

## 适用范围

- 任意天体
- 两体模型
- 忽略大气阻力
- 忽略重力损失
- 忽略自转
- 冲量式机动

---

# 基本符号

μ     = 天体引力参数 (gravParameter)  
r₀    = 天体半径（发射点到中心距离）  
r     = 目标圆轨道半径 = r₀ + 目标高度  
rPe   = 目标近点半径  
rAp   = 目标远点半径  
a     = 半长轴 = (rPe + rAp) / 2  

α     = a / r₀   （用于模型选择）  
e     = (rAp − rPe) / (rAp + rPe)  （椭圆偏心率）  

---

# 模型 A：能量最小模型（全局最优）

## 推导基础

初始能量：E₀ = −μ/r₀  

目标圆轨道能量：E = −μ/(2r)  

目标椭圆轨道能量：E = −μ/(2a)，其中 a = (rPe + rAp)/2  

所需能量增量：ΔE = E − E₀  

由 ½v² = ΔE 得：

## 最终公式

### 圆轨道

$$
\Delta v_A = \sqrt{ 2μ \left( \frac{1}{r_0} - \frac{1}{2r} \right) }
$$

### 椭圆轨道

$$
\Delta v_A = \sqrt{ 2μ \left( \frac{1}{r_0} - \frac{1}{r_\mathrm{Pe} + r_\mathrm{Ap}} \right) }
$$

---

## 特性

- 全局最小 Δv  
- 连续推力极限解  
- 不假设霍曼结构  
- 任意目标半径适用  

当 r → ∞ 时：Δv_A → √(2μ/r₀)（逃逸速度）

---

# 模型 B：霍曼结构模型（工程结构解）

## 情况 1：目标为圆轨道 (rPe = rAp = r)

第一段（进入转移椭圆）：

$$
\mathrm{burn1} = \sqrt{\frac{\mu}{r_0}} \cdot \sqrt{ \frac{2r}{r_0 + r} }
$$

第二段（在 r 处圆化）：

$$
\mathrm{burn2} = \sqrt{\frac{\mu}{r}} \cdot \left( 1 - \sqrt{ \frac{2r_0}{r_0 + r} } \right)
$$

总 Δv：Δv_B = burn1 + burn2

---

## 情况 2：目标为椭圆轨道 (rPe < rAp)

$$
\mathrm{burn1} = \sqrt{\frac{\mu}{r_0}} \cdot \sqrt{ \frac{2r_\mathrm{Pe}}{r_0 + r_\mathrm{Pe}} }
$$

$$
\mathrm{burn2} = \sqrt{\frac{\mu}{r_\mathrm{Pe}}} \cdot \left( 1 - \sqrt{ \frac{2r_0}{r_0 + r_\mathrm{Pe}} } \right)
$$

$$
\mathrm{burn3} = \sqrt{ \frac{2μ\,r_\mathrm{Ap}}{ r_\mathrm{Pe}(r_\mathrm{Pe} + r_\mathrm{Ap}) } } - \sqrt{ \frac{\mu}{r_\mathrm{Pe}} }
$$

总 Δv：Δv_B = burn1 + burn2 + burn3

---

## 特性

- 结构清晰  
- 可直接对应机动步骤  
- 适用于远轨道  
- 当 r ≫ r₀ 或 rAp ≫ rPe 时与模型 A 收敛  

当 r → ∞ 时：Δv_B → √(2μ/r₀)

---

# 模型选择边界（任意天体通用）

定义：α = a/r₀（a 为半长轴），e = (rAp−rPe)/(rAp+rPe)

---

## 1. 近地轨道区域

**α < 1.5**

特点：
- 目标仍在引力井底部
- 霍曼结构引入额外结构误差
- 低轨椭圆可能略增加 Δv

推荐：使用模型 A

---

## 2. 中间轨道区域

**1.5 ≤ α ≤ 2.0**

特点：
- 两模型差异快速衰减
- 低偏心椭圆（e < 0.1）Δv 差异可忽略
- 高偏心椭圆（e ≥ 0.1）建议用模型 B

推荐：
- 低偏心椭圆：模型 A
- 高偏心椭圆：模型 B

---

## 3. 高升轨 / 远轨道区域

**α > 2.0**

特点：
- 轨道接近引力井边缘
- 两模型几乎等价
- 霍曼结构更符合实际操作

推荐：使用模型 B

---

# 统一决策流程（椭圆轨道版）

```text
计算半长轴 a = (rPe + rAp) / 2
计算相对比率 α = a / r₀
计算偏心率 e = (rAp − rPe) / (rAp + rPe)

# 1. 近地轨道区域
若 α < 1.5：
    使用模型 A

# 2. 中间轨道区域
否则若 1.5 ≤ α ≤ 2.0：
    若 e < 0.1：
        使用模型 A
    否则：
        使用模型 B

# 3. 高升轨 / 远轨道区域
否则：  # α > 2.0
    使用模型 B
```

---

# 总结

**模型 A：**
- 能量极限
- 数学最优
- 适合作为理论下界
- 一次 Δv 注入即可，不关心机动结构

**模型 B：**
- 工程结构
- 分段机动
- 适合远轨与任务规划
- 低偏心高轨椭圆也可用
- 更贴近游戏内机动节点（Maneuver Node）或实际分段操作

两者在 r → ∞ 或高远轨椭圆时收敛为 √(2μ/r₀)，即逃逸速度。
