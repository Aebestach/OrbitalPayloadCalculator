# Orbital Payload Calculator 中的估计值与可计算值

本文档说明计算器中哪些数据是**根据物理公式精确计算**（随天体不同自动调整），哪些是**估计值**（使用启发式或经验公式）。

---

## 实际可计算的量（根据天体自动调整）

以下量由天体物理属性和轨道几何精确推导，不依赖估计：

| 数据 | 计算方式 | 使用的天体属性 |
|------|----------|----------------|
| **轨道速度** | \(v = \sqrt{\mu \cdot (2/r_{Pe} - 1/a)}\) | `gravParameter`、`Radius`、轨道高度 |
| **平面变轨 ΔV** | \(2v \sin(\theta/2)\) | 轨道速度、发射纬度、目标倾角 |
| **自转增益/损失** | 赤道速度 + 纬度修正 | `rotationPeriod`、`Radius` |
| **阶段 ΔV** | 齐奥尔科夫斯基公式 | 质量、推进剂、Isp |
| **大气 Isp 混合** | 采样 `GetPressure(h)` 曲线加权 | `atmosphereDepth`、`atmospherePressureSeaLevel` |
| **仿真中重力损失** | 时间步进：\(g = \mu/R^2\) | `gravParameter`、`Radius` |
| **仿真中大气密度** | \(\rho = p/(R_{空气} \cdot T)\) | `GetPressure(h)`、`GetTemperature(h)` |
| **默认轨道高度** | 大气顶 + 10000 m | `atmosphereDepth` |

---

## 估计值（启发式 / 经验公式）

以下量因无法在编辑器中获取精确数据或计算代价高，而使用启发式或经验公式：

| 数据 | 估计方式 | 说明 |
|------|----------|------|
| **CdA（气动阻力面积）** | `0.7~1.0 × √(湿质量)` | 编辑器中无部件几何，用质量近似外形（参见 `LossModel.cs:78-80`） |
| **重力损失**（无仿真时） | `FallbackEstimate` 经验公式 | 无推力/Isp 数据时使用的替代公式 |
| **大气损失**（无仿真时） | `atmoA + atmoB` 经验公式 | 基于 gN、pN、dN 归一化缩放因子的拟合公式 |
| **姿态损失** | `baseA + baseB × incFactor` | 无论仿真与否都使用经验系数 |
| **Turn Start Speed** | \(80 × gN^{0.25} × (...)\) | 基于重力、大气归一化得出的启转速度 |
| **Turn Start Altitude** | `atmoHeight × (0.01 + 0.004×ln(1+pN))` | 启转高度估计 |
| **大气 Isp 混合权重** | `1 - 0.5×i/N` | 对"火箭在各高度停留时间"的近似权重 |

---

## 简要总结

- **可算的量**：轨道速度、平面变轨、自转、阶段 ΔV、重力场、大气压强/温度/密度、大气混合 Isp。这些都由天体数据驱动，随天体不同自动变化。
- **估计的量**：CdA、重力/大气/姿态损失（尤其是 Fallback 和姿态项）、启转速度和高度、大气混合权重。这些依赖启发式或经验规则。

即使启用时间步进仿真，气动阻力本身用的是**真实大气密度**（通过 `GetPressure`/`GetTemperature`），但**CdA**（阻力系数×迎风面积）仍由湿质量启发式估计，因为编辑器中无法获取真实部件几何。
